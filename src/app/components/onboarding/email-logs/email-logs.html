<div class="emaillogs-wrapper">

    <!-- PAGE HEADER -->
    <div class="header-box">
        <div class="header-flex">
            <div>
                <h1 class="page-title">
                    <i></i>Email Logs
                </h1>
                <p class="subtitle">Monitor email delivery status and performance</p>
            </div>

            <button class="refresh-btn" (click)="loadEmailLogs()">
                <i class="bi bi-arrow-clockwise"></i>
            </button>
        </div>
    </div>

    <!-- STAT CARDS -->
    <div class="stats-grid">

        <div class="stats-card teal-bg">
            <small>Total Logs</small>
            <h3>{{getTotalLogs()}}</h3>
        </div>

        <div class="stats-card green-bg">
            <small>Completed</small>
            <h3>{{getCompletedCount()}}</h3>
        </div>

        <div class="stats-card red-bg">
            <small>Failed</small>
            <h3>{{getFailedCount()}}</h3>
        </div>

        <div class="stats-card teal-bg">
            <small>Total Sent</small>
            <h3>{{getTotalSent()}}</h3>
        </div>

    </div>

    <!-- MAIN TABLE BOX -->
    <div class="recent-wrapper">

        <!-- Heading same style as Employee List -->
        <h2>Recent Email Logs</h2>

        <!-- Top row: search on the right -->
        <!-- <div class="table-header">
            <div class="search-box">
                <i class="bi bi-search search-icon"></i>
                <input type="text" placeholder="Search logs..." [(ngModel)]="searchTerm" (input)="onSearchChange()">
            </div>
        </div> -->

        <div class="table-scroll">
            <!-- use survey-table to reuse Employee List table styling -->
            <table class="survey-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>BATCH ID</th>
                        <th class="text-center">TOTAL</th>
                        <th class="text-center">SENT</th>
                        <th class="text-center">FAILED</th>
                        <th class="text-center">INELIGIBLE</th>
                        <th class="text-center">STATUS</th>
                        <th class="text-center">ACTIONS</th>
                    </tr>
                </thead>

                <tbody>

                    <tr *ngFor="let log of displayedEmailLogs">
                        <td class="bold">{{log.id}}</td>
                        <td>BATCH-{{log.employeeBatchLogId}}</td>

                        <td class="text-center">{{log.totalEmployees}}</td>

                        <td class="text-center">
                            <span class="badge badge-green">{{log.emailsSent}}</span>
                        </td>

                        <td class="text-center">
                            <span class="badge badge-red">{{log.emailsFailed}}</span>
                        </td>

                        <td class="text-center">
                            <span class="badge badge-yellow">{{log.ineligibleDueToDate}}</span>
                        </td>

                        <td class="text-center">
                            <span class="status-badge" [ngClass]="getStatusBadgeClass(log.status)">
                                <i [class]="'bi ' + getStatusIcon(log.status)"></i> {{log.status}}
                            </span>
                        </td>

                        <td class="text-center action-buttons">
                            <button class="btn view-btn" (click)="viewDetails(log.id)">
                                <i class="bi bi-eye"></i> View
                            </button>

                            <button class="btn resend-btn" *ngIf="log.emailsFailed > 0">
                                <i class="bi bi-send"></i> Resend
                            </button>
                        </td>
                    </tr>

                    <tr *ngIf="displayedEmailLogs.length === 0">
                        <td colspan="8" class="no-data">
                            <i class="bi bi-inbox empty-icon"></i>
                            <h4>No email logs found</h4>
                            <p>Email logs will appear here once available</p>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>

        <!-- PAGINATION (reusing pagination-controls like Employee List) -->
        <div class="pagination-controls" *ngIf="totalPages > 1">

            <button class="btn" (click)="previousPage()" [disabled]="currentPage === 1">
                Previous
            </button>

            <button class="btn page-btn" *ngFor="let page of getPageNumbers()" (click)="goToPage(page)"
                [class.active]="page === currentPage">
                {{page}}
            </button>

            <button class="btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
                Next
            </button>

        </div>


    </div>


</div>